{%- comment -%}
  BREATHE WELLNESS SANCTUARY - FAQ Section
{%- endcomment -%}

<section class="faq-section" data-section-id="{{ section.id }}">
  <div class="container container--narrow">
    {%- if section.settings.heading != blank -%}
      <h2 class="faq-heading text-center" data-animate="fade-in-up">{{ section.settings.heading }}</h2>
    {%- endif -%}

    {%- if section.settings.subheading != blank -%}
      <p class="faq-subheading text-center" data-animate="fade-in-up">{{ section.settings.subheading }}</p>
    {%- endif -%}

    <div class="faq-list" data-animate="fade-in-up" data-delay="1">
      {%- for block in section.blocks -%}
        <div class="faq-item" {{ block.shopify_attributes }}>
          <button class="faq-question" aria-expanded="false">
            <h3>{{ block.settings.question }}</h3>
            <span class="faq-icon" aria-hidden="true"></span>
          </button>
          <div class="faq-answer" aria-hidden="true">
            <p>{{ block.settings.answer }}</p>
          </div>
        </div>
      {%- endfor -%}
    </div>

    {%- if section.settings.contact_text != blank -%}
      <p class="faq-contact text-center" data-animate="fade-in-up">
        {{ section.settings.contact_text }}
        {%- if section.settings.contact_email != blank -%}
          <a href="mailto:{{ section.settings.contact_email }}">{{ section.settings.contact_email }}</a>
        {%- endif -%}
      </p>
    {%- endif -%}
  </div>
</section>

<style>
  .faq-section {
    padding: var(--space-xl) 0;
    background: {{ section.settings.background_color }};
  }

  .faq-heading {
    font-family: var(--font-heading);
    font-size: clamp(1.75rem, 3vw, 2.5rem);
    font-weight: 400;
    margin-bottom: var(--space-sm);
    opacity: 0;
  }

  .faq-heading.animated {
    opacity: 1;
  }

  .faq-subheading {
    font-size: 1rem;
    color: rgba(44, 24, 16, 0.7);
    margin-bottom: var(--space-lg);
    opacity: 0;
  }

  .faq-subheading.animated {
    opacity: 1;
  }

  .faq-list {
    opacity: 0;
  }

  .faq-list.animated {
    opacity: 1;
  }

  .faq-item {
    border-bottom: 1px solid rgba(44, 24, 16, 0.1);
  }

  .faq-question {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-md);
    padding: var(--space-md) 0;
    background: none;
    border: none;
    cursor: pointer;
    text-align: left;
  }

  .faq-question h3 {
    font-family: var(--font-heading);
    font-size: 1.125rem;
    font-weight: 400;
    color: var(--color-deep-earth);
    transition: color var(--transition-smooth);
    margin: 0;
  }

  .faq-question:hover h3 {
    color: var(--color-burnt-sienna);
  }

  .faq-icon {
    width: 20px;
    height: 20px;
    position: relative;
    flex-shrink: 0;
  }

  .faq-icon::before,
  .faq-icon::after {
    content: '';
    position: absolute;
    background: var(--color-deep-earth);
    transition: all var(--transition-smooth);
  }

  .faq-icon::before {
    width: 100%;
    height: 2px;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }

  .faq-icon::after {
    width: 2px;
    height: 100%;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
  }

  .faq-item.active .faq-icon::after {
    transform: translateX(-50%) rotate(90deg);
    opacity: 0;
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.4s ease;
  }

  .faq-item.active .faq-answer {
    max-height: 500px;
    padding-bottom: var(--space-md);
  }

  .faq-answer p {
    font-size: 1rem;
    line-height: 1.7;
    color: rgba(44, 24, 16, 0.75);
    max-width: none;
  }

  .faq-contact {
    margin-top: var(--space-lg);
    font-size: 0.9375rem;
    color: rgba(44, 24, 16, 0.6);
    opacity: 0;
  }

  .faq-contact.animated {
    opacity: 1;
  }

  .faq-contact a {
    color: var(--color-burnt-sienna);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
      const question = item.querySelector('.faq-question');
      const answer = item.querySelector('.faq-answer');
      
      question.addEventListener('click', () => {
        const isActive = item.classList.contains('active');
        
        // Close all items
        faqItems.forEach(i => {
          i.classList.remove('active');
          i.querySelector('.faq-question').setAttribute('aria-expanded', 'false');
          i.querySelector('.faq-answer').setAttribute('aria-hidden', 'true');
        });
        
        // Open clicked item if it wasn't active
        if (!isActive) {
          item.classList.add('active');
          question.setAttribute('aria-expanded', 'true');
          answer.setAttribute('aria-hidden', 'false');
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "FAQ",
  "tag": "section",
  "class": "faq-section-wrapper",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#FDFBF8"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "text",
      "id": "contact_text",
      "label": "Contact Text",
      "default": "Have more questions? Reach out to"
    },
    {
      "type": "text",
      "id": "contact_email",
      "label": "Contact Email",
      "default": "hello@breathewellness.com"
    }
  ],
  "blocks": [
    {
      "type": "question",
      "name": "Question",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "How does this work?"
        },
        {
          "type": "textarea",
          "id": "answer",
          "label": "Answer",
          "default": "This is the answer to your question."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ",
      "category": "Content"
    }
  ]
}
{% endschema %}







